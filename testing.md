---
layout: default
title: Testing/Debugging Approach
nav_order: 4
---
## Testing and Debugging
### Mechanical Aspect
One of the main challenges we faced in this project was refining the design of the strumming arm. It took several iterations to resolve issues related to mechanical noise, instability, and ensuring the arm had the proper range of motion without interfering with the muting components. We also encountered clearance issues with the pick, as it initially couldn't reach the strings—this required careful adjustments to address positioning and reach. Assembling the servo mounts onto the main mounting plate was also a challenge; it took a while to finalize optimal locations for functionality and support. 
I wish we had more accurately measured where the servo mounts needed to go beforehand, as the mounting plate took a long time to print—making redesigns and reprints time-consuming.  Also, the guitar neck is not exactly flat, but rounded.  This was highlighted when our muting mechanism only really muted the top three strings and less on the bottom strings because they are positioned vertically lower due to the guitar’s design. Additionally, we had to CAD a custom servo mount to ensure the servo stood upright rather than laterally for proper strumming motion. One thing I really wish we had known before starting was the bioacoustic effect of the servo and pick—the vibrations produced a surprisingly loud mechanical noise. Unlike strumming by hand, where your fingers absorb a lot of that vibration and you mainly hear the strings, the strumming arm amplified both the string and mechanical sounds. Understanding that earlier would have informed our material and design choices for quieter operation. These experiences highlighted the importance of planning for mechanical tolerances, acoustic behavior, and clearance early in the design process.

### Electrical Aspect

### Software Aspect
The most time-consuming aspect was implementing PWM in C. We were dealing with issues early on with getting the correct clock period and PWM cycle of 50Hz. We ended up going into the MCUXpresso clock settings and changing the core clock to 48MHz from the original 20.97MHz. This allowed us to set the correct calulations for servo motion using the TPM (Timer PWM Module). We then tweaked the values of the TPM period in order to achieve near-perfect 50Hz frequency for PWM. The oscilloscope was connected to the PWM signal to help us debug the issue of the clock and TPM period.
![image](images/48MHz%20working!.PNG)
Another major issue was fixing the PIT timer which apparently runs on bus clock rather than the system core clock. The PIT timer was used to check the current state and move on to the next strumming or muting movement at the correct time. This caused us to run into BPM issues as a quarter note at 120 BPM was actually playing at 60 BPM. To prevent this from happening we simply divide the system core clock by 2 when setting the PIT timer period. This resolved the issue of the unexpected BPM.